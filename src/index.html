<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>GLSL Editor</title>
    <!-- build:remove -->
    <!-- Connect to server process -->
    <!-- <script>require('electron-connect').client.create()</script> -->
    <!-- end:build -->
    <link type="text/css" rel="stylesheet" href="../build/glslEditor.css">
    <link type="text/css" rel="stylesheet" href="./css/ElectronApp.css">
    <script type="application/javascript" src="../build/glslEditor.js"></script>
  </head>
  <body>
    <div id="glsl_editor"></div>
  </body>

  <script>
    class ShaderDelegate {
      setUniform(key, val) {
        console.log('SHDEL.setUniform()', key, val);
      }
      render(force) {
        console.log('SHDEL.render()', force);
      }
      resize() {
        console.log('SHDEL.resize()');
      }
      load(program) {
        console.log('SHDEL.load()', program);
      }
      onError(cb) {
        console.log('SHDEL.onError()', cb);
      }
      test(onTest, testingFrag) {
        console.log('SHDEL.test()', onTest, testingFrag);
      }
    }
    const shaderDelegate = new ShaderDelegate();
    window.glslEditor = new GlslEditor('#glsl_editor', {
      canvas_size: 500,
      theme: 'monokai',
      multipleBuffers: true,
      watchHash: true,
      fileDrops: true,
      menu: true,
      frag: `// hello world
precision mediump float;
uniform vec2 u_resolution;
uniform vec2 u_mouse;
uniform float u_time;
void main() {
    vec2 st = gl_FragCoord.xy/u_resolution.xy;
    st.x *= u_resolution.x/u_resolution.y

    vec3 color = vec3(0.);
    color = vec3(st.x,st.y,abs(sin(u_time)));

    gl_FragColor = vec4(color,1.0);
}`,
      shaderDelegate,
    });
  </script>
</html>
